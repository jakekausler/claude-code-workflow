digraph MiroFlow {
    rankdir=TB;

    node_0 [label="Start Looping" shape=box];
    node_1 [label="Grab a Stage\nGet the next stage by priority\nUnresolved review comments\nReady for finalize\nReady for refinement\nReady for build\nReady for work (design)\nIf there is a tie, prioritize\nHigh explicit priority over low priority\nDue date proximity with cutoff\nThe most blockers" shape=record];
    node_2 [label="Claude\ncompletes stage\ncolumn in one\nor more\nsessions" shape=box];
    node_3 [label="Finished Design" shape=box];
    node_4 [label="Finished Build" shape=box];
    node_5 [label="Finished Refinement" shape=box];
    node_6 [label="Finished Finalize" shape=box];
    node_7 [label="Needs User\nDecision?" shape=diamond];
    node_8 [label="Advance to Refinement" shape=box];
    node_9 [label="Needs User\nTesting?" shape=diamond];
    node_10 [label="Using remote\nsource?" shape=diamond];
    node_11 [label="Create MR" shape=box];
    node_12 [label="Merge to Main" shape=box];
    node_13 [label="Manual\nChangelog?" shape=diamond];
    node_14 [label="Update Changelog" shape=box];
    node_15 [label="Advance to Done" shape=box];
    node_16 [label="Move to Awaiting Merge" shape=box];
    node_17 [label="Refetch All MR Comments" shape=box];
    node_18 [label="Any new\ncomments?" shape=diamond];
    node_19 [label="Move those stages to\nAddressing Comments" shape=box];
    node_20 [label="Addressed Comments" shape=box];
    node_21 [label="Advance to Awaiting Decision" shape=box];
    node_22 [label="Advance to Awaiting Refinement" shape=box];
    node_23 [label="Advance to Build" shape=box];
    node_24 [label="Advance to Finalize" shape=box];
    node_25 [label="More than X\nLearnings?" shape=diamond];
    node_26 [label="Analyze Learnings" shape=box];
    node_27 [label="Learnings to\nReport?" shape=diamond];
    node_28 [label="Record Learnings" shape=box];
    node_29 [label="Record Journal" shape=box];
    node_30 [label="Stage\nAvailable?" shape=diamond];
    node_31 [label="Wait N Seconds" shape=box];

    node_0 -> node_1 [label="N Workers"];
    node_2 -> node_4;
    node_2 -> node_5;
    node_2 -> node_6;
    node_2 -> node_3;
    node_4 -> node_8;
    node_3 -> node_7;
    node_5 -> node_9;
    node_6 -> node_10;
    node_10 -> node_11 [label="Yes"];
    node_11 -> node_16;
    node_10 -> node_12 [label="No"];
    node_12 -> node_13;
    node_13 -> node_14 [label="Yes"];
    node_14 -> node_15;
    node_17 -> node_18;
    node_18 -> node_19 [label="Yes"];
    node_18 -> node_1 [label="No"];
    node_19 -> node_1;
    node_2 -> node_20;
    node_20 -> node_16;
    node_9 -> node_22 [label="Yes"];
    node_7 -> node_21 [label="Yes"];
    node_7 -> node_23 [label="No"];
    node_9 -> node_24 [label="No"];
    node_25 -> node_26 [label="Yes"];
    node_25 -> node_17 [label="No"];
    node_26 -> node_17;
    node_27 -> node_28 [label="Yes"];
    node_27 -> node_29 [label="No"];
    node_28 -> node_29;
    node_29 -> node_25;
    node_23 -> node_27;
    node_21 -> node_27;
    node_24 -> node_27;
    node_22 -> node_27;
    node_15 -> node_27;
    node_16 -> node_27;
    node_8 -> node_27;
    node_1 -> node_30;
    node_30 -> node_2 [label="Yes"];
    node_30 -> node_31;
    node_31 -> node_1;
}
